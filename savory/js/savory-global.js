/**
 * Ice-cream loader
 */
(() => {
  if (window.location.href.indexOf("/admin/") !== -1) {
    return;
  }

  const loader = `<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1532px"
	 height="2087px" viewBox="0 0 1532 2087" enable-background="new 0 0 1532 2087" xml:space="preserve">
<g id="Cargador">
	<g>
		<defs>
			<rect id="SVGID_1_" x="14.5" width="1491" height="2087">
				<animate attributeType="XML" attributeName="y"  
      from="1884" to="176" dur="1s" begin="0s"
      fill="restore" repeatCount="indefinite" />		
</rect>
		</defs>
		<clipPath id="SVGID_2_">
			<use xlink:href="#SVGID_1_"  overflow="visible"/>
		</clipPath>
		<path clip-path="url(#SVGID_2_)" fill="#FFFFFF" d="M801.375,189c93.231,7,172.263,36.4,241.4,89.9
			c28.597,22.1,55.625,49,75.603,75.2c46.911,61.5,73.646,137.9,79.618,227.9c1.664,24,5.975,31.8,23.993,43
			c13.318,8.3,19.587,13.2,28.009,22.1c20.271,21.5,29.771,46.4,29.771,78.2c0,35.9-10.87,66.101-31.24,86.8
			c-12.73,12.9-24.974,20.101-47.007,27.601c-19.586,6.6-26.245,11.7-32.415,24.8c-1.565,3.3-21.839,57.5-45.146,120.5
			c-169.322,459.2-318.177,860.5-322.486,869.5c-5.777,11.9-13.221,20.3-21.937,24.7c-5.778,2.899-7.442,3.3-14.396,3.3
			c-12.731-0.1-21.544-5.3-30.359-18c-2.448-3.4-5.679-9.1-7.247-12.6c-3.035-6.601-157.374-423.4-315.435-851.5
			c-26.834-72.601-49.848-134.301-51.218-137c-3.231-6.5-9.696-13.801-14.885-17c-2.351-1.301-10.283-4.5-17.628-6.9
			c-28.988-9.6-48.183-24.3-61.305-46.8c-9.988-17.101-15.179-36.5-16.256-60.8c-2.057-45.801,16.061-80.5,54.939-105.2
			c19.782-12.601,24.188-19.4,26.146-39.601c4.016-42.899,7.051-64.199,12.634-87.6c16.746-69.8,47.202-127,93.426-175.4
			c57.877-60.4,126.821-101.4,203.794-121c31.534-8,51.806-11.2,92.055-14.4C743.597,187.9,789.036,188.1,801.375,189z"/>
	</g>
</g>
<g id="Borde">
	<path fill="#FFFFFF" d="M1260.6,644.1c-8.6-8.899-15-13.8-28.6-22.1c-18.4-11.2-22.8-19-24.5-43c-6.1-90-33.4-166.4-81.3-227.9
		c-20.4-26.2-48-53.1-77.2-75.2C978.4,222.4,897.7,193,802.5,186c-12.6-0.9-59-1.1-69-0.3c-41.1,3.2-61.8,6.4-94,14.4
		c-78.6,19.6-149,60.6-208.1,121C384.2,369.5,353.1,426.7,336,496.5c-5.7,23.4-8.8,44.7-12.9,87.6c-2,20.2-6.5,27-26.7,39.601
		c-39.7,24.7-58.2,59.399-56.1,105.2c1.1,24.3,6.4,43.699,16.6,60.8c13.4,22.5,33,37.2,62.6,46.8c7.5,2.4,15.6,5.6,18,6.9
		c5.3,3.199,11.9,10.5,15.2,17C354.1,863.1,377.6,924.8,405,997.4c161.4,428.1,319,844.899,322.1,851.5
		c1.601,3.5,4.9,9.199,7.4,12.6c9,12.7,18,17.9,31,18c7.1,0,8.8-0.4,14.7-3.3c8.899-4.4,16.5-12.8,22.399-24.7
		c4.4-9,156.4-410.3,329.301-869.5c23.8-63,44.5-117.2,46.1-120.5c6.3-13.1,13.1-18.2,33.1-24.8c22.5-7.5,35-14.7,48-27.601
		C1279.9,788.4,1291,758.2,1291,722.3C1291,690.5,1281.3,665.6,1260.6,644.1z M1202.1,731.7c-1.899,10.6-6.1,16.8-14,20.7
		c-7.199,3.6-13.899,4.6-32,4.6h-16.8l-186.8,487.6c-127,331.2-187.1,487-187.6,485.7c-0.4-1-83.601-218-184.9-482.3
		S394.9,765.1,393.8,762.2L391.9,757h-17.2c-19,0-25.8-1.1-33.101-5.4c-8.6-5-12.8-13.3-12.899-25.6c-0.2-15.7,7-22,31.3-27.4
		c31.3-7,40-12.5,46.7-29.6c1.5-4,1.7-9.2,1.8-44.5c0.2-30.4,0.6-43.4,1.9-54C419.7,492.1,448.3,431.6,501,379
		c62.9-63,143.2-97.3,243-103.9c18.4-1.2,23.9-1.2,41.5,0c83,5.4,150.8,28.9,207.9,71.8c65.899,49.6,107.3,114.7,122.5,192.4
		c5.699,28.9,6.5,39.4,6.6,83.7c0.2,44.6,0.3,45.9,6.5,55.2c6.7,10.1,16,14.6,41.8,20.3c6.3,1.4,14.101,3.7,17.4,5.2
		C1199.8,708.9,1204.6,718.4,1202.1,731.7z"/>
</g>
</svg>
`;

  const loaderContainer = `<div class="ice-cream-loader_container"></div>`;

  document.body.insertAdjacentHTML("beforeend", loaderContainer);

  const lc = document.querySelector(".ice-cream-loader_container");
  if (!lc) return;

  lc.insertAdjacentHTML("afterbegin", loader);

  setTimeout(() => {
    lc.classList.add("navbarDesktop__display--disappears");
  }, 1500);
})();

/**
 * Menu
 */
document.addEventListener("DOMContentLoaded", function (event) {
  (() => {
    // Getting menu element
    const menu = document.querySelector("#navbarDesktop.navbar-desktop");
    if (!menu) return;

    // Relocating menu element in DOM
    menu.parentElement.removeChild(menu);

    document.body.insertAdjacentElement("beforeend", menu);

    // Icon to hide menu
    const closeIcon = `
      <div class="navbarDesktop__display-close">
        <div class="close-icon" />
      </div>
    `;

    menu.insertAdjacentHTML("afterbegin", closeIcon);

    // Getting buttons to show and hide menu
    const btnMenu = document.querySelector(".savory__navbar--menu");
    if (!btnMenu) return;

    const btnCross = document.querySelector(".navbarDesktop__display-close");
    if (!btnCross) return;

    // Adding events to buttons
    btnMenu.addEventListener("click", () => {
      if (Array.from(menu.classList).includes("navbarDesktop__display--disappears")) {
        menu.classList.remove("navbarDesktop__display--disappears");
      }

      menu.classList.add("navbarDesktop__display--appears");
    });

    btnCross.addEventListener("click", () => {
      if (Array.from(menu.classList).includes("navbarDesktop__display--appears")) {
        menu.classList.remove("navbarDesktop__display--appears");
      }

      menu.classList.add("navbarDesktop__display--disappears");
    });

    // Social Media
    const socialMediaContainer = `
      <div class="navbarDesktop__display-social-media">
        <div class="social-media-icon">
          <a class="elementor-icon elementor-social-icon elementor-social-icon-1" href="https://www.facebook.com/SavoryChile" target="_blank" title="Facebook">
            <img alt="facebook" class="elementor-social-icon-image elementor-social-img" src="/sites/default/files/2020-07/facebook.png">
          </a>
        </div>

        <div class="social-media-icon">
          <a class="elementor-icon elementor-social-icon elementor-social-icon-1" href="https://twitter.com/savorychile" target="_blank" title="Twitter">
            <img alt="twitter" class="elementor-social-icon-image elementor-social-img" src="/sites/default/files/2020-07/twitter.png">
          </a>
        </div>

        <div class="social-media-icon">
          <a class="elementor-icon elementor-social-icon elementor-social-icon-1" href="https://www.instagram.com/savorychile/" target="_blank" title="Instagram">
            <img alt="instagram" class="elementor-social-icon-image elementor-social-img" src="/sites/default/files/2020-07/instagram.png">
          </a>
        </div>

        <div class="social-media-icon">
          <a class="elementor-icon elementor-social-icon elementor-social-icon-1" href="/hablemos" target="_blank" title="Hablemos">
            <img alt="hablemos" class="elementor-social-icon-image elementor-social-img" src="/sites/default/files/2020-07/telephone.png">
          </a>
        </div>
      </div>
    `;

    menu.insertAdjacentHTML("beforeend", socialMediaContainer);
  })();
});

/**
 * Footer | Social icons
 */
(() => {
  const socialContainer = document.querySelector(".elementor-social-icons-wrapper");
  if (!socialContainer) return;

  const links = Array.from(socialContainer.querySelectorAll("a.elementor-social-icon"));
  if (links.length === 0) return;

  links.forEach((link) => link.setAttribute("target", "_blank"));
})();

/**
 * Shops bars
 */
(() => {
  // Checking URL to go
  if (window.location.href.indexOf("/nuestros-helados/para-compartir/") === -1) {
    return;
  }

  // Getting buttons and shop bars
  const btns = Array.from(document.querySelectorAll(".btn_para-compartir"));
  if (!btns) return;

  const shops = Array.from(document.querySelectorAll(".shops_para-compartir"));
  if (!shops) return;

  const wrappers = Array.from(document.querySelectorAll(".para-compartir"));
  if (!wrappers) return;

  console.log("1.-", btns, shops, wrappers);

  // Adding event to buttons
  btns.forEach((btn) => {
    btn.addEventListener("click", shopIconOnClick);
  });

  // Relocating shop bars
  shops.forEach((shop) => {
    Array.from(shop.classList).filter((shopClass) => {
      if (shopClass.startsWith("shops_para-compartir_")) {
        wrappers.forEach((wrapper) => {
          Array.from(wrapper.classList).filter((wrapperClass) => {
            if (wrapperClass.startsWith("para-compartir_")) {
              if (shopClass.indexOf(wrapperClass) !== -1) {
                console.log("2.-", shopClass, wrapperClass);

                shop.parentElement.removeChild(shop);
                wrapper.insertAdjacentElement("beforeend", shop);
              }
            }
          });
        });
      }
    });

    shop.style.display = "none";
  });

  // Showing and hiding items on click
  function shopIconOnClick(e) {
    const actual = Array.from(e.currentTarget.classList).filter((className) =>
      className.startsWith("btn_para-compartir_")
    );

    const shop = document.querySelector(`.shops_${actual[0].split("btn_")[1]}`);
    shop.style.display = shop.style.display !== "block" ? "block" : "none";
  }
})();

/**
 * Search
 */
(() => {
  const ss = document.querySelector(".savory-search");
  if (!ss) return;

  const ssc = document.querySelector(".savory-search-container");
  if (!ssc) return;

  const ssicon = document.querySelector(".savory-search-icon");
  if (!ssicon) return;

  const ssinput = ss.querySelector("input");
  if (!ssinput) return;

  // Relocating container
  ssc.parentElement.removeChild(ssc);
  document.body.insertAdjacentElement("beforeend", ssc);

  // Icon to hide menu
  const closeIcon = `
    <div class="savory-search__display-close">
      <div class="close-icon" />
    </div>
  `;

  ss.insertAdjacentHTML("afterbegin", closeIcon);

  // Event to show Search
  ssicon.addEventListener("click", () => {
    if (Array.from(ssc.classList).includes("navbarDesktop__display--disappears")) {
      ssc.classList.remove("navbarDesktop__display--disappears");
    }

    ssc.classList.add("navbarDesktop__display--appears");
  });

  // Event to hide Search
  const ssclose = document.querySelector(".savory-search__display-close");
  if (!ssclose) return;

  ssclose.addEventListener("click", () => {
    if (Array.from(ssc.classList).includes("navbarDesktop__display--appears")) {
      ssc.classList.remove("navbarDesktop__display--appears");
    }

    ssc.classList.add("navbarDesktop__display--disappears");
  });

  // Setting up form input
  ssinput.setAttribute("placeholder", "Buscar...");

  ssinput.addEventListener("focus", function () {
    ssinput.setAttribute("placeholder", "");
  });

  ssinput.addEventListener("focusout", function () {
    ssinput.setAttribute("placeholder", "Buscar...");
  });
})();

/**
 * Remove class to show bg video on mobile devices.
 */
(() => {
  if (document.querySelector(".elementor-background-video-container")) {
    document.querySelector(".elementor-background-video-container").classList.remove("elementor-hidden-phone");
  }
})();
